<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SME SLL 專案管理系統 | 可可商業銀行</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; }
        .font-mono { font-family: 'Roboto Mono', monospace; }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        .nav-item.active { background-color: rgba(255,255,255,0.15); border-left: 4px solid #C5A065; color: #ffffff; }
        .nav-item { border-left: 4px solid transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- Mock Data: 專案核心數據 ---
        const kpiData = {
            progress: 100,
            budgetUsed: 2.83, // M
            budgetTotal: 3.00, // M
            loanPerformance: 30, // M
            loanTarget: 20 // M
        };

        // --- Mock Data: 風險登記表 (Risk Register) ---
        const riskData = [
            { id: "R-01", category: "合規風險", desc: "客戶提供偽造之 ISO 碳盤查證書 (漂綠)", probability: "中", impact: "高", strategy: "轉嫁/減輕", status: "已監控", mitigation: "KYG 機制：強制 RM 上傳官網查核截圖，並由作業科 100% 覆核。" },
            { id: "R-02", category: "專案資源", desc: "5-6月開發期撞期核心系統年度維護，測試環境不穩", probability: "高", impact: "中", strategy: "預防", status: "已解決", mitigation: "於 3 月 Charter 階段即鎖定 IT 開發人力，並安排離峰測試時段。" },
            { id: "R-03", category: "市場風險", desc: "第三方認證機構產能不足，客戶無法及時取得證書", probability: "中", impact: "中", strategy: "減輕", status: "觀察中", mitigation: "開放「經濟部節能標章」等多種替代指標，分散單一認證塞車風險。" },
            { id: "R-04", category: "作業風險", desc: "RM 誤判證書效期，導致利率設定錯誤", probability: "低", impact: "低", strategy: "預防", status: "已解決", mitigation: "系統開發自動檢核邏輯，證書效期小於 6 個月無法進件。" }
        ];

        // --- Mock Data: WBS 進度表 ---
        const wbsData = [
            { id: "1.0", task: "啟動階段", owner: "PMO", status: "Done", progress: 100, date: "2026/03/15" },
            { id: "2.0", task: "規劃階段 (產品辦法/SRS)", owner: "PMO/IT", status: "Done", progress: 100, date: "2026/04/30" },
            { id: "3.0", task: "風險規章與契約審查", owner: "風控/法遵", status: "Done", progress: 100, date: "2026/05/31" },
            { id: "4.0", task: "系統開發與 SIT", owner: "資訊處", status: "Done", progress: 100, date: "2026/06/15" },
            { id: "5.0", task: "UAT 使用者驗收測試", owner: "企金作業", status: "Done", progress: 100, date: "2026/06/30" },
            { id: "6.0", task: "教育訓練與試點", owner: "企金商品", status: "Done", progress: 100, date: "2026/07/31" },
            { id: "7.0", task: "正式上市 (Go-Live)", owner: "全行", status: "Done", progress: 100, date: "2026/08/15" }
        ];

        // --- Mock Data: 文件列表 (DMS) ---
        const docData = [
            { code: "PMO-01", name: "專案章程", type: "PDF", ver: "v1.0", author: "殷小盈", date: "2026/03/15", file: "documents/PMO-01_Project_Charter.pdf" },
            { code: "PMO-02", name: "利害關係人登記表", type: "XLS", ver: "v1.2", author: "殷小盈", date: "2026/03/20", file: "documents/PMO-02_Stakeholder_Register.xlsx" },
            { code: "PROD-02", name: "產品辦法細則", type: "PDF", ver: "v2.0", author: "企金商品部", date: "2026/04/30", file: "documents/PROD-02_Product_Program.pdf" },
            { code: "IT-01", name: "系統需求規格說明書", type: "DOC", ver: "v1.5", author: "資訊處", date: "2026/04/30", file: "documents/IT-01_SRS.docx" },
            { code: "RISK-01", name: "漂綠風險防範報告", type: "PDF", ver: "v1.0", author: "風險管理處", date: "2026/05/10", file: "documents/RISK-01_Greenwashing_Risk_Report.pdf" },
            { code: "LEGAL-01", name: "借貸契約增補條款", type: "PDF", ver: "v1.0", author: "法令遵循處", date: "2026/05/31", file: "documents/LEGAL-01_Loan_Agreement_Amendment.pdf" },
            { code: "IT-02", name: "UAT 測試驗收報告", type: "PDF", ver: "Final", author: "殷小盈", date: "2026/06/30", file: "documents/IT-02_UAT_Report.pdf" },
            { code: "OPS-01", name: "標準作業程序", type: "PDF", ver: "v1.0", author: "企金作業處", date: "2026/07/15", file: "documents/OPS-01_SOP.pdf" },
            { code: "MKT-01", name: "業務銷售懶人包", type: "PDF", ver: "v1.0", author: "品牌公關部", date: "2026/07/20", file: "documents/MKT-01_Sales_Kit.pdf" },
            { code: "PMO-06", name: "專案結案報告", type: "PDF", ver: "Final", author: "殷小盈", date: "2026/08/31", file: "documents/PMO-06_Project_Closure_Report.pdf" }
        ];

        // --- Icons (SVG) ---
        const Icons = {
            Dashboard: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>,
            Risk: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>,
            Schedule: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>,
            Docs: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg>,
            User: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>,
            Bank: () => <svg className="w-8 h-8 text-[#C5A065]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"></path></svg>,
            Download: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>,
            Check: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7"></path></svg>
        };

        // --- Sub-Components ---

        // 1. Dashboard View
        const DashboardView = () => (
            <div className="space-y-6 animate-fadeIn">
                <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div className="bg-white p-5 rounded-xl shadow-sm border-l-4 border-[#003366]">
                        <div className="text-sm text-slate-500 mb-1">專案總進度</div>
                        <div className="text-3xl font-bold text-slate-800">100%</div>
                        <div className="text-xs text-green-600 mt-2 flex items-center gap-1">
                            <Icons.Check /> 已正式結案
                        </div>
                    </div>
                    <div className="bg-white p-5 rounded-xl shadow-sm border-l-4 border-[#C5A065]">
                        <div className="text-sm text-slate-500 mb-1">預算執行率</div>
                        <div className="text-3xl font-bold text-slate-800">95.0%</div>
                        <div className="text-xs text-slate-400 mt-2">結餘 5% (NT$ 170k)</div>
                    </div>
                    <div className="bg-white p-5 rounded-xl shadow-sm border-l-4 border-[#003366]">
                        <div className="text-sm text-slate-500 mb-1">首月撥款績效</div>
                        <div className="text-3xl font-bold text-[#003366]">NT$ 30M</div>
                        <div className="text-xs text-green-600 mt-2 font-medium">達成率 150%</div>
                    </div>
                    <div className="bg-white p-5 rounded-xl shadow-sm border-l-4 border-green-500">
                        <div className="text-sm text-slate-500 mb-1">風險狀態</div>
                        <div className="text-3xl font-bold text-green-600">Low</div>
                        <div className="text-xs text-slate-400 mt-2">所有風險已緩釋</div>
                    </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div className="bg-white p-6 rounded-xl shadow-sm col-span-2">
                        <h3 className="font-bold text-[#003366] mb-4 border-b pb-2">專案摘要</h3>
                        <div className="space-y-4">
                            <p className="text-sm text-slate-600 leading-relaxed">
                                本專案旨在因應 2026 年國內碳費開徵，為中小企業提供簡易型轉型融資方案。
                                專案團隊於 6 個月內完成產品設計、系統開發與風控審查，並達成所有關鍵績效指標。
                                成功建立 <strong>KYG (Know Your Green)</strong> 機制，有效降低漂綠風險。
                            </p>
                            <div className="flex gap-4 pt-2">
                                <div className="bg-blue-50 px-4 py-2 rounded text-xs text-blue-800">
                                    <span className="block font-bold">產品類型</span>
                                    永續連結貸款 (SLL)
                                </div>
                                <div className="bg-blue-50 px-4 py-2 rounded text-xs text-blue-800">
                                    <span className="block font-bold">目標客群</span>
                                    既有 A/B 級中小企業
                                </div>
                                <div className="bg-blue-50 px-4 py-2 rounded text-xs text-blue-800">
                                    <span className="block font-bold">關鍵系統</span>
                                    證書到期預警模組
                                </div>
                            </div>
                        </div>
                    </div>
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                        <h3 className="font-bold text-[#003366] mb-4 border-b pb-2">近期里程碑</h3>
                        <div className="space-y-4">
                            <div className="flex gap-3 opacity-50">
                                <div className="text-xs font-mono text-slate-400">06/15</div>
                                <div className="text-sm line-through">風控準則核准</div>
                            </div>
                            <div className="flex gap-3 opacity-50">
                                <div className="text-xs font-mono text-slate-400">06/30</div>
                                <div className="text-sm line-through">UAT 驗收完成</div>
                            </div>
                            <div className="flex gap-3 opacity-50">
                                <div className="text-xs font-mono text-slate-400">07/31</div>
                                <div className="text-sm line-through">全行教育訓練</div>
                            </div>
                            <div className="flex gap-3 text-green-700 font-bold bg-green-50 p-2 rounded">
                                <div className="text-xs font-mono">08/15</div>
                                <div className="text-sm">產品正式上市 (Live)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );

        // 2. Risk View
        const RiskView = () => (
            <div className="bg-white rounded-xl shadow-sm overflow-hidden animate-fadeIn">
                <div className="p-6 border-b border-slate-100 flex justify-between items-center">
                    <h3 className="font-bold text-[#002D56] flex items-center gap-2">
                        <Icons.Risk /> 風險登記表 (Risk Register)
                    </h3>
                    <span className="text-xs bg-slate-100 px-2 py-1 rounded text-slate-500">Last Updated: 2026/08/31</span>
                </div>
                <div className="overflow-x-auto">
                    <table className="w-full text-sm text-left">
                        <thead className="bg-slate-50 text-slate-500 font-medium">
                            <tr>
                                <th className="px-6 py-3">ID</th>
                                <th className="px-6 py-3">風險類別</th>
                                <th className="px-6 py-3">風險描述</th>
                                <th className="px-6 py-3">衝擊度</th>
                                <th className="px-6 py-3">應對策略</th>
                                <th className="px-6 py-3">緩釋措施 (Mitigation)</th>
                                <th className="px-6 py-3">狀態</th>
                            </tr>
                        </thead>
                        <tbody className="divide-y divide-slate-100">
                            {riskData.map(risk => (
                                <tr key={risk.id} className="hover:bg-slate-50">
                                    <td className="px-6 py-4 font-mono text-xs">{risk.id}</td>
                                    <td className="px-6 py-4 text-[#003366] font-bold">{risk.category}</td>
                                    <td className="px-6 py-4 max-w-xs truncate" title={risk.desc}>{risk.desc}</td>
                                    <td className="px-6 py-4">
                                        <span className={`px-2 py-1 rounded text-xs font-bold ${
                                            risk.impact === '高' ? 'bg-red-100 text-red-700' : 
                                            risk.impact === '中' ? 'bg-orange-100 text-orange-700' : 'bg-green-100 text-green-700'
                                        }`}>{risk.impact}</span>
                                    </td>
                                    <td className="px-6 py-4">{risk.strategy}</td>
                                    <td className="px-6 py-4 text-xs text-slate-600 max-w-sm">{risk.mitigation}</td>
                                    <td className="px-6 py-4">
                                        <span className="flex items-center gap-1 text-green-600 font-bold text-xs">
                                            <Icons.Check /> {risk.status}
                                        </span>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            </div>
        );

        // 3. Schedule View
        const ScheduleView = () => (
            <div className="bg-white rounded-xl shadow-sm overflow-hidden animate-fadeIn">
                <div className="p-6 border-b border-slate-100">
                    <h3 className="font-bold text-[#002D56] flex items-center gap-2">
                        <Icons.Schedule /> 專案進度與 WBS (Work Breakdown Structure)
                    </h3>
                </div>
                <div className="p-6">
                    <div className="space-y-6">
                        {wbsData.map(item => (
                            <div key={item.id} className="flex items-center gap-4">
                                <div className="w-12 text-xs font-mono text-slate-400">{item.id}</div>
                                <div className="flex-1">
                                    <div className="flex justify-between mb-1">
                                        <span className="font-bold text-slate-700 text-sm">{item.task}</span>
                                        <span className="text-xs text-slate-500">{item.owner} | {item.date}</span>
                                    </div>
                                    <div className="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
                                        <div className="bg-[#003366] h-full" style={{width: `${item.progress}%`}}></div>
                                    </div>
                                </div>
                                <div className="w-16 text-right text-xs font-bold text-green-600">{item.progress}%</div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        // 4. Documents View
        const DocumentView = () => {
            const handleDownload = (fileName) => {
                alert(`模擬下載：${fileName}\n\n(請確認 documents 資料夾已上傳至 GitHub)`);
            };

            return (
                <div className="bg-white rounded-xl shadow-sm overflow-hidden animate-fadeIn">
                    <div className="p-6 border-b border-slate-100">
                        <h3 className="font-bold text-[#002D56] flex items-center gap-2">
                            <Icons.Docs /> 文件中心 (DMS)
                        </h3>
                    </div>
                    <div className="divide-y divide-slate-100">
                        {docData.map((doc, idx) => (
                            <div key={idx} className="p-4 flex items-center justify-between hover:bg-slate-50 transition-colors">
                                <div className="flex items-center gap-4">
                                    <div className={`w-10 h-10 rounded flex items-center justify-center text-xs font-bold text-white
                                        ${doc.type === 'PDF' ? 'bg-red-500' : 
                                          doc.type === 'XLS' ? 'bg-green-600' : 
                                          doc.type === 'DOC' ? 'bg-blue-600' : 
                                          doc.type === 'JPG' ? 'bg-purple-500' : 'bg-orange-500'}`}>
                                        {doc.type}
                                    </div>
                                    <div>
                                        <div className="font-bold text-slate-700 text-sm">{doc.name}</div>
                                        <div className="text-xs text-slate-400 font-mono mt-0.5">
                                            {doc.code} • Ver: {doc.ver} • {doc.author} • {doc.date}
                                        </div>
                                    </div>
                                </div>
                                <a 
                                    href={doc.file} 
                                    download 
                                    target="_blank" 
                                    rel="noopener noreferrer"
                                    className="text-slate-400 hover:text-[#C5A065] transition-colors p-2"
                                >
                                    <Icons.Download />
                                </a>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // --- Main App Component ---
        function App() {
            const [currentView, setCurrentView] = useState('dashboard');

            return (
                <div className="min-h-screen flex flex-col md:flex-row text-slate-800 bg-[#f1f5f9]">
                    
                    {/* Sidebar */}
                    <aside className="w-full md:w-64 bg-[#002D56] text-white flex-shrink-0 flex flex-col">
                        <div className="p-6 flex items-center gap-3 border-b border-white/10">
                            <Icons.Bank />
                            <div>
                                <h1 className="font-bold text-lg leading-none">Coco Bank</h1>
                                <span className="text-xs text-slate-400 font-mono">PMO SYSTEM</span>
                            </div>
                        </div>
                        <nav className="p-4 space-y-2 flex-1">
                            <button 
                                onClick={() => setCurrentView('dashboard')}
                                className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors text-left nav-item ${currentView === 'dashboard' ? 'active' : 'text-slate-300 hover:bg-white/5'}`}
                            >
                                <Icons.Dashboard /> 專案總覽
                            </button>
                            <button 
                                onClick={() => setCurrentView('risk')}
                                className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors text-left nav-item ${currentView === 'risk' ? 'active' : 'text-slate-300 hover:bg-white/5'}`}
                            >
                                <Icons.Risk /> 風險監控
                            </button>
                            <button 
                                onClick={() => setCurrentView('schedule')}
                                className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors text-left nav-item ${currentView === 'schedule' ? 'active' : 'text-slate-300 hover:bg-white/5'}`}
                            >
                                <Icons.Schedule /> 進度排程
                            </button>
                            <button 
                                onClick={() => setCurrentView('docs')}
                                className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors text-left nav-item ${currentView === 'docs' ? 'active' : 'text-slate-300 hover:bg-white/5'}`}
                            >
                                <Icons.Docs /> 文件中心
                            </button>
                        </nav>
                        <div className="p-6 border-t border-white/10">
                            <div className="bg-[#001A33] p-4 rounded-lg border border-white/5 flex items-center gap-3">
                                <div className="w-10 h-10 rounded-full bg-[#C5A065] flex items-center justify-center text-[#002D56] font-bold">
                                    <Icons.User />
                                </div>
                                <div>
                                    <div className="font-bold text-sm">YIN, KOYING (PM)</div>
                                    <div className="text-xs text-[#C5A065]">企金商品部</div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    {/* Main Content Area */}
                    <main className="flex-1 p-6 md:p-10 overflow-y-auto">
                        {/* Header */}
                        <div className="flex justify-between items-center mb-8 pb-6 border-b border-slate-200">
                            <div>
                                <div className="flex items-center gap-2 mb-2">
                                    <span className="bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded border border-blue-200 font-mono">PRJ-2026-SME-SLL</span>
                                    <span className="bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded border border-green-200 font-bold">狀態：已結案</span>
                                </div>
                                <h2 className="text-3xl font-bold text-[#002D56]">中小企業永續連結貸款 (SME SLL)</h2>
                            </div>
                            <div className="text-right">
                                <div className="text-xs text-slate-500 uppercase tracking-wider">Project Cycle</div>
                                <div className="font-bold text-lg text-slate-700">Mar 01 - Aug 31, 2026</div>
                            </div>
                        </div>

                        {/* View Content */}
                        {currentView === 'dashboard' && <DashboardView />}
                        {currentView === 'risk' && <RiskView />}
                        {currentView === 'schedule' && <ScheduleView />}
                        {currentView === 'docs' && <DocumentView />}

                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
